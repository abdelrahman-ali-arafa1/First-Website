import{r as a,u as G,a as I,b as R,j as e,e as y,D as L}from"./index-DOQ3mfqC.js";import{B as j}from"./Button-aCKTJIJa.js";import{F}from"./FormInput-BAyslBWq.js";import{F as A}from"./FormTextarea-PYVEUsDr.js";function U({title:u,titleId:x,...o},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":x},o),u?a.createElement("title",{id:x},u):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const k=a.forwardRef(U);function q(){const{addDesign:u}=G(),{currentUser:x}=I(),o=R(),n=a.useRef(null),[l,P]=a.useState({title:"",description:"",category:""}),[d,h]=a.useState(null),[p,b]=a.useState(null),[r,c]=a.useState({}),[N,v]=a.useState(!1),[w,D]=a.useState("");if(!x)return o("/login",{state:{from:{pathname:"/upload"}}}),null;const f=t=>{const{name:s,value:g}=t.target;P(m=>({...m,[s]:g})),r[s]&&c(m=>({...m,[s]:""}))},C=t=>{const s=t.target.files[0];if(!s)return;if(!["image/jpeg","image/png","image/gif","application/pdf"].includes(s.type)){c(i=>({...i,image:"Please upload an image (JPEG, PNG, GIF) or PDF file"}));return}const m=5*1024*1024;if(s.size>m){c(i=>({...i,image:"File size must be less than 5MB"}));return}if(r.image&&c(i=>({...i,image:""})),b(s),s.type.startsWith("image/")){const i=new FileReader;i.onload=()=>{h(i.result)},i.readAsDataURL(s)}else h("pdf")},S=()=>{h(null),b(null),n.current&&(n.current.value="")},E=()=>{const t={};return l.title.trim()||(t.title="Title is required"),l.description.trim()||(t.description="Description is required"),l.category||(t.category="Please select a category"),p||(t.image="Please upload an image or PDF file"),c(t),Object.keys(t).length===0},M=async t=>{if(t.preventDefault(),D(""),!!E()){v(!0);try{const s=d==="pdf"?"https://placehold.co/600x400?text=PDF+Document":d,g=await u({title:l.title,description:l.description,category:l.category,imageUrl:s,fileName:p.name,fileType:p.type});o(`/design/${g.id}`)}catch(s){D(s.message||"Failed to upload design. Please try again."),v(!1)}}};return e.jsxs("div",{className:"space-y-10 pb-16",children:[e.jsxs("div",{className:"relative bg-gradient-to-br from-primary-600 via-primary-700 to-secondary-600 text-white py-16 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:[...Array(15)].map((t,s)=>e.jsx("div",{className:"absolute rounded-full bg-white",style:{width:`${Math.random()*10+2}rem`,height:`${Math.random()*10+2}rem`,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:Math.random()*.5+.1,transform:`scale(${Math.random()*.8+.6})`}},s))})}),e.jsxs("div",{className:"relative z-10 text-center px-6",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Upload Your Design"}),e.jsx("p",{className:"text-primary-100 max-w-2xl mx-auto text-lg",children:"Share your creative work with others and get feedback from the community"})]})]}),w&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-5 rounded-xl shadow-sm border border-red-100 flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})}),e.jsx("p",{children:w})]}),e.jsxs("form",{onSubmit:M,className:"space-y-8",children:[e.jsx("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Design Preview"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Upload your design file (JPG, PNG, GIF, or PDF)"})]}),e.jsxs("div",{className:`border-2 ${r.image?"border-red-200 bg-red-50":"border-gray-200 bg-gray-50"} border-dashed rounded-xl p-6 flex flex-col items-center justify-center h-80`,children:[d?e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[d==="pdf"?e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[e.jsx("svg",{className:"h-16 w-16 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),e.jsx("span",{className:"mt-2 font-medium",children:"PDF Document"}),e.jsx("span",{className:"text-sm mt-1",children:p.name})]}):e.jsx("img",{src:d,alt:"Design preview",className:"max-h-full max-w-full object-contain rounded-lg shadow-md"}),e.jsx("button",{type:"button",onClick:S,className:"absolute top-2 right-2 bg-white p-1.5 rounded-full shadow hover:bg-gray-100 transition-colors",children:e.jsx(y,{className:"h-5 w-5 text-gray-500"})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(k,{className:"h-16 w-16 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop your file here, or click to browse"}),e.jsx(j,{type:"button",onClick:()=>{var t;return(t=n.current)==null?void 0:t.click()},variant:"outline",className:"rounded-full",children:"Select File"}),r.image&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:r.image})]}),e.jsx("input",{type:"file",ref:n,onChange:C,accept:"image/jpeg,image/png,image/gif,application/pdf",className:"hidden"})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Maximum file size: 5MB. Supported formats: JPEG, PNG, GIF, PDF"})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Design Details"})}),e.jsx(F,{label:"Design Title",type:"text",id:"title",name:"title",value:l.title,onChange:f,placeholder:"Give your design a descriptive title",error:r.title,required:!0,className:"rounded-lg"}),e.jsx(A,{label:"Description",id:"description",name:"description",value:l.description,onChange:f,placeholder:"Describe your design, including your inspiration and process",rows:4,error:r.description,required:!0,className:"rounded-lg"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:["Category",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"category",name:"category",value:l.category,onChange:f,className:`form-select block w-full border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500 ${r.category?"border-red-300":""}`,required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),Object.entries(L).map(([t,s])=>e.jsx("option",{value:t,children:s.name},t))]}),r.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.category})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags (Optional)"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Add tags to help others discover your design"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-primary-100 text-primary-700",children:["UI Design",e.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-primary-200 h-4 w-4 inline-flex items-center justify-center",children:e.jsx(y,{className:"h-3 w-3"})})]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-primary-100 text-primary-700",children:["Web",e.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-primary-200 h-4 w-4 inline-flex items-center justify-center",children:e.jsx(y,{className:"h-3 w-3"})})]}),e.jsx(F,{type:"text",placeholder:"Add a tag",className:"w-40 px-3 py-1 text-sm rounded-full",containerClassName:"mb-0 inline-block"})]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>o(-1),className:"rounded-full",children:"Cancel"}),e.jsxs(j,{type:"submit",isLoading:N,disabled:N,className:"rounded-full px-8",children:[e.jsx(k,{className:"h-5 w-5 mr-2"}),"Upload Design"]})]})]})]})}export{q as default};

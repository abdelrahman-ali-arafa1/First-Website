import{r as a,f as R,a as A,u as L,j as e,L as w}from"./index-DOQ3mfqC.js";import{C as I,a as P,b as $,c as B}from"./Card-ChR5Qaft.js";import{B as i}from"./Button-aCKTJIJa.js";import{F as D}from"./FormInput-BAyslBWq.js";import{F as M}from"./FormTextarea-PYVEUsDr.js";import{F as T}from"./PencilSquareIcon-BGkOk6PL.js";import{F as Y,a as O}from"./HeartIcon-B_2S6qLY.js";function q({title:n,titleId:o,...u},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":o},u),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const z=a.forwardRef(q);function Q(){const{userId:n}=R(),{currentUser:o,updateProfile:u}=A(),{getDesignsByUser:d}=L(),[t,j]=a.useState(null),[g,F]=a.useState([]),[v,f]=a.useState(!1),[C,b]=a.useState(!1),[U,N]=a.useState(!1),[l,y]=a.useState({name:"",bio:"",avatar:""}),c=o&&n===o.id;a.useEffect(()=>{(async()=>{try{const m=JSON.parse(localStorage.getItem("studentDesign_users")||"[]").find(x=>x.id===n);if(m){const{password:x,...h}=m;j(h),y({name:h.name||"",bio:h.bio||"",avatar:h.avatar||""});const k=d(n);F(k)}else N(!0)}catch(r){console.error("Error fetching user data:",r),N(!0)}})()},[n,d]);const p=s=>{const{name:r,value:m}=s.target;y(x=>({...x,[r]:m}))},S=async s=>{s.preventDefault(),b(!0);try{const r=await u({name:l.name,bio:l.bio,avatar:l.avatar});j(r),f(!1)}catch(r){console.error("Error updating profile:",r)}finally{b(!1)}},E=s=>{const r={year:"numeric",month:"long",day:"numeric"};return new Date(s).toLocaleDateString(void 0,r)};return U?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"User Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The user profile you're looking for doesn't exist or has been removed."}),e.jsx(i,{to:"/gallery",children:"Return to Gallery"})]}):t?e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8 bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"h-32 bg-gradient-to-r from-primary-600 to-primary-400"}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start -mt-16 md:-mt-12",children:[e.jsx("div",{className:"mb-4 md:mb-0 md:mr-6",children:e.jsx("img",{src:t.avatar,alt:t.name,className:"w-24 h-24 rounded-full border-4 border-white shadow-md"})}),e.jsxs("div",{className:"text-center md:text-left flex-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.name}),e.jsxs("p",{className:"text-gray-600 text-sm flex items-center justify-center md:justify-start",children:[e.jsx(z,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Member since ",E(t.createdAt)]})]})]}),c&&!v&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>f(!0),startIcon:e.jsx(T,{className:"h-4 w-4"}),className:"mt-4 md:mt-0",children:"Edit Profile"})]}),v?e.jsxs("form",{onSubmit:S,className:"mt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx(D,{label:"Name",id:"name",name:"name",value:l.name,onChange:p,placeholder:"Your Name",required:!0}),e.jsx(D,{label:"Avatar URL",id:"avatar",name:"avatar",value:l.avatar,onChange:p,placeholder:"https://example.com/avatar.jpg"})]}),e.jsx(M,{label:"Bio",id:"bio",name:"bio",value:l.bio,onChange:p,placeholder:"Tell others about yourself",rows:3}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(i,{type:"submit",isLoading:C,loadingText:"Saving...",children:"Save Profile"})]})]}):e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.bio||"No bio provided."})})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Your Designs":`${t.name}'s Designs`}),g.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(s=>e.jsxs(I,{hoverEffect:!0,children:[e.jsx(w,{to:`/design/${s.id}`,children:e.jsx(P,{src:s.imageUrl,alt:s.title,aspectRatio:"aspect-[4/3]"})}),e.jsxs($,{children:[e.jsx(w,{to:`/design/${s.id}`,children:e.jsx("h3",{className:"font-bold text-lg mb-2 hover:text-primary-600",children:s.title})}),e.jsx("p",{className:"text-gray-600 line-clamp-2 text-sm",children:s.description})]}),e.jsxs(B,{className:"flex justify-between text-gray-500 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:s.likes.length})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:s.comments.length})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:c?"You haven't uploaded any designs yet.":`${t.name} hasn't uploaded any designs yet.`}),c&&e.jsx(i,{to:"/upload",children:"Upload Your First Design"})]})]})]}):e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})})}export{Q as default};

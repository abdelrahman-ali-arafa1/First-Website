import{r,f as W,b as Z,a as q,u as z,D as U,j as e,L as h}from"./index-DOQ3mfqC.js";import{B as g}from"./Button-aCKTJIJa.js";import{F as H}from"./FormTextarea-PYVEUsDr.js";import{F as V,a as L}from"./HeartIcon-B_2S6qLY.js";import{F as J}from"./PencilSquareIcon-BGkOk6PL.js";function _({title:n,titleId:l,...a},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},a),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const S=r.forwardRef(_);function K({title:n,titleId:l,...a},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},a),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Q=r.forwardRef(K);function X({title:n,titleId:l,...a},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},a),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const Y=r.forwardRef(X);function ee({title:n,titleId:l,...a},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},a),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const se=r.forwardRef(ee);function re({title:n,titleId:l,...a},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},a),n?r.createElement("title",{id:l},n):null,r.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const te=r.forwardRef(re);function ce(){var D;const{id:n}=W(),l=Z(),{currentUser:a}=q(),{getDesignById:o,toggleLike:R,addComment:$,deleteDesign:T}=z(),[s,u]=r.useState(null),[p,N]=r.useState(""),[F,f]=r.useState(""),[v,w]=r.useState(!1),[I,k]=r.useState(!1),[A,C]=r.useState(!1),[c,d]=r.useState("overview"),b=r.useRef(null),j=s==null?void 0:s.likes.includes(a==null?void 0:a.id),B=a&&s&&a.id===s.userId,y=s?((D=U.find(t=>t.id===s.category))==null?void 0:D.name)||"Other":"";if(r.useEffect(()=>{(async()=>{try{const i=o(n);i?u(i):C(!0)}catch(i){console.error("Error fetching design:",i),C(!0)}})()},[n,o]),r.useEffect(()=>{window.scrollTo(0,0)},[]),A)return e.jsxs("div",{className:"container-narrow py-16 text-center",children:[e.jsx("h1",{className:"mb-4",children:"Design Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The design you're looking for doesn't exist or has been removed."}),e.jsx(g,{to:"/gallery",startIcon:e.jsx(S,{className:"h-5 w-5"}),children:"Return to Gallery"})]});if(!s)return e.jsx("div",{className:"flex justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});const O=async()=>{if(!a){l("/login",{state:{from:{pathname:`/design/${n}`}}});return}try{const t=await R(s.id);u(i=>({...i,likes:t.isLiked?[...i.likes,a.id]:i.likes.filter(x=>x!==a.id)}))}catch(t){console.error("Error toggling like:",t)}},P=async t=>{if(t.preventDefault(),!a){l("/login",{state:{from:{pathname:`/design/${n}`}}});return}if(!p.trim()){f("Comment cannot be empty");return}f(""),w(!0);try{const i=await $(s.id,p.trim());u(x=>({...x,comments:[...x.comments,i]})),N("")}catch(i){console.error("Error adding comment:",i),f("Failed to add comment. Please try again.")}finally{w(!1)}},G=async()=>{if(confirm("Are you sure you want to delete this design? This action cannot be undone.")){k(!0);try{await T(s.id),l("/gallery",{state:{message:"Design successfully deleted"}})}catch(t){console.error("Error deleting design:",t),k(!1)}}},m=t=>{const i={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,i)},E=[s.imageUrl],M=()=>{d("comments"),setTimeout(()=>{if(b.current){const t=b.current.querySelector("#comments-section");t&&t.scrollIntoView({behavior:"smooth"})}},100)};return e.jsxs("div",{className:"min-h-screen bg-white",ref:b,children:[e.jsx("div",{className:"container-wide py-4",children:e.jsxs(h,{to:"/gallery",className:"text-primary-600 hover:text-primary-700 flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Back to Gallery"})]})}),e.jsx("div",{className:"bg-gray-50 py-12 mb-8",children:e.jsxs("div",{className:"container-wide grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-xs font-medium",children:y}),e.jsx("span",{className:"h-1 w-1 bg-gray-300 rounded-full"}),e.jsx("span",{className:"text-gray-500 text-sm",children:m(s.createdAt)})]}),e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-6 leading-tight",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:s.description.split(`
`)[0]}),e.jsxs("div",{className:"flex gap-4 items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.userAvatar,alt:s.userName,className:"w-10 h-10 rounded-full border border-gray-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.userName}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Designer"})]})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(Q,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{className:"text-sm",children:["Created ",m(s.createdAt)]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:O,className:`
                  flex items-center gap-2 px-4 py-2.5 rounded-full text-sm font-medium transition-colors
                  ${j?"bg-accent-100 text-accent-700 hover:bg-accent-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                `,"aria-label":j?"Unlike":"Like",children:[j?e.jsx(te,{className:"w-4 h-4"}):e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:s.likes.length})]}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2.5 rounded-full text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:s.comments.length})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 rounded-full text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Share"})]}),B&&e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx(g,{variant:"outline",size:"sm",to:`/edit/${s.id}`,startIcon:e.jsx(J,{className:"h-4 w-4"}),children:"Edit"}),e.jsx(g,{variant:"danger",size:"sm",onClick:G,isLoading:I,startIcon:e.jsx(se,{className:"h-4 w-4"}),children:"Delete"})]})]})]}),e.jsx("div",{className:"rounded-2xl overflow-hidden shadow-soft-lg",children:e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-auto object-cover"})})]})}),e.jsx("div",{className:"border-b border-gray-100 mb-8",children:e.jsx("div",{className:"container-wide",children:e.jsxs("div",{className:"flex gap-8",children:[e.jsx("button",{onClick:()=>d("overview"),className:`py-4 font-medium ${c==="overview"?"border-b-2 border-primary-600 text-primary-600":"border-b-2 border-transparent text-gray-500 hover:text-gray-800"}`,children:"Overview"}),e.jsx("button",{onClick:()=>d("process"),className:`py-4 font-medium ${c==="process"?"border-b-2 border-primary-600 text-primary-600":"border-b-2 border-transparent text-gray-500 hover:text-gray-800"}`,children:"Process"}),e.jsx("button",{onClick:()=>d("gallery"),className:`py-4 font-medium ${c==="gallery"?"border-b-2 border-primary-600 text-primary-600":"border-b-2 border-transparent text-gray-500 hover:text-gray-800"}`,children:"Gallery"}),e.jsxs("button",{onClick:()=>d("comments"),className:`py-4 font-medium ${c==="comments"?"border-b-2 border-primary-600 text-primary-600":"border-b-2 border-transparent text-gray-500 hover:text-gray-800"}`,children:["Comments (",s.comments.length,")"]})]})})}),e.jsx("div",{className:"container-wide pb-16",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"md:col-span-2",children:[c==="overview"&&e.jsxs("div",{className:"prose prose-lg max-w-none",children:[e.jsx("h2",{children:"Project Overview"}),e.jsx("p",{className:"whitespace-pre-line",children:s.description})]}),c==="process"&&e.jsxs("div",{className:"prose prose-lg max-w-none",children:[e.jsx("h2",{children:"Design Process"}),e.jsx("p",{children:"The design process would be described here in a real implementation. This section would detail the research, inspiration, and conceptualization phases."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 my-8 not-prose",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold mb-4",children:"1"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Research"}),e.jsx("p",{className:"text-gray-600",children:"Conducted user interviews and competitive analysis to understand the problem space"})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold mb-4",children:"2"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Ideation"}),e.jsx("p",{className:"text-gray-600",children:"Explored multiple concepts through sketching and wireframing to find the best approach"})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold mb-4",children:"3"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Execution"}),e.jsx("p",{className:"text-gray-600",children:"Refined the selected concept into the final design with attention to details"})]})]}),e.jsx("h3",{children:"Challenges & Solutions"}),e.jsx("p",{children:"This section would outline the challenges faced during the project and how they were addressed through innovative design solutions."}),e.jsx("h3",{children:"Tools & Techniques"}),e.jsx("p",{children:"Details about the tools, software, and techniques used to create this design would be shared here, providing insight into the technical aspects."})]}),c==="gallery"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Project Gallery"}),E.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-6",children:E.map((t,i)=>e.jsx("div",{className:"rounded-xl overflow-hidden shadow-soft-md",children:e.jsx("img",{src:t,alt:`${s.title} - Image ${i+1}`,className:"w-full h-auto object-cover"})},i))}):e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:e.jsx("p",{className:"text-gray-500",children:"No additional images available for this project."})})]}),c==="comments"&&e.jsxs("div",{id:"comments-section",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6",children:["Comments (",s.comments.length,")"]}),a?e.jsxs("form",{onSubmit:P,className:"mb-10",children:[e.jsx(H,{placeholder:"Share your thoughts on this design...",value:p,onChange:t=>N(t.target.value),error:F,rows:3}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx(g,{type:"submit",isLoading:v,disabled:v,children:"Post Comment"})})]}):e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl shadow-soft mb-10",children:[e.jsx("p",{className:"text-gray-700 mb-3",children:"Join the conversation! Log in to leave a comment and connect with other designers."}),e.jsx(h,{to:"/login",className:"btn btn-primary inline-flex",children:"Log In"})]}),s.comments.length>0?e.jsx("div",{className:"space-y-6",children:s.comments.map(t=>e.jsx("div",{className:"bg-gray-50 p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("img",{src:t.userAvatar,alt:t.userName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx(h,{to:`/profile/${t.userId}`,className:"font-semibold text-gray-900 hover:text-primary-600",children:t.userName}),e.jsx("span",{className:"text-xs text-gray-500",children:m(t.createdAt)})]}),e.jsx("p",{className:"mt-1 text-gray-700",children:t.text})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl shadow-soft",children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-gray-300 mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No comments yet"}),e.jsx("p",{className:"text-gray-600",children:"Be the first to share your thoughts on this design!"})]})]})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl sticky top-24",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Project Details"}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex justify-between pb-4 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-500",children:"Category"}),e.jsx("span",{className:"font-medium",children:y})]}),e.jsxs("div",{className:"flex justify-between pb-4 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-500",children:"Date"}),e.jsx("span",{className:"font-medium",children:m(s.createdAt)})]}),e.jsxs("div",{className:"flex justify-between pb-4 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-500",children:"Likes"}),e.jsx("span",{className:"font-medium",children:s.likes.length})]}),e.jsxs("div",{className:"flex justify-between pb-4 border-b border-gray-200",children:[e.jsx("span",{className:"text-gray-500",children:"Comments"}),e.jsx("span",{className:"font-medium",children:s.comments.length})]})]}),e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Designer"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("img",{src:s.userAvatar,alt:s.userName,className:"w-14 h-14 rounded-full"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold mb-1",children:s.userName}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Designer"})]})]}),e.jsx(h,{to:`/profile/${s.userId}`,className:"btn btn-primary py-2.5 w-full flex justify-center",children:"View Profile"}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm",children:y}),e.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm",children:"Design"}),e.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm",children:"Student"}),e.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm",children:"Portfolio"})]})]})]})})]})})]})}export{ce as default};

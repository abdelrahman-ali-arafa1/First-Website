import{f as z,g as F,a as $,b as B,r as n,j as e,L as m}from"./index-DOQ3mfqC.js";function H(){const{teamId:a}=z(),{getTeamById:c,updateTeam:C,inviteToTeam:S,updateMemberRole:L,removeMember:M}=F(),{currentUser:r}=$(),v=B(),[t,d]=n.useState(null),[A,p]=n.useState(!0),[f,j]=n.useState(null),[l,x]=n.useState("overview"),[h,y]=n.useState(""),[g,N]=n.useState(!1),[w,T]=n.useState(null),[D,k]=n.useState(!1);n.useEffect(()=>{if(!a)return;(()=>{p(!0);try{const i=c(a);if(!i){j("Team not found");return}d(i)}catch(i){j(i.message||"Failed to load team")}finally{p(!1)}})()},[a,c]);const u=t&&r&&t.members.some(s=>s.userId===r.id),o=t&&r&&t.members.some(s=>s.userId===r.id&&s.role==="admin"),P=t&&(t.visibility==="public"||u),E=async s=>{if(s.preventDefault(),!(!h||!a||!o)){N(!0),T(null),k(!1);try{await S(a,h),k(!0),y("");const i=c(a);d(i)}catch(i){T(i.message||"Failed to send invitation")}finally{N(!1)}}},R=async(s,i)=>{if(!(!a||!o))try{await L(a,s,i);const b=c(a);d(b)}catch(b){console.error("Failed to update role:",b)}},I=async s=>{if(!(!a||!o&&s!==(r==null?void 0:r.id))&&window.confirm("Are you sure you want to remove this member from the team?"))try{if(await M(a,s),s===(r==null?void 0:r.id)){v("/teams");return}const i=c(a);d(i)}catch(i){console.error("Failed to remove member:",i)}};return A?e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"h-40 bg-gray-200 rounded mb-6"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded mb-4"})]})}):f||!t?e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:f||"Team not found"})})]})}),e.jsx(m,{to:"/teams",className:"text-indigo-600 hover:text-indigo-900",children:"← Back to Teams"})]}):P?e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsx("img",{src:t.avatar,alt:t.name,className:"w-16 h-16 rounded-full mr-4"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:t.name}),e.jsx("p",{className:"text-gray-500",children:t.visibility==="public"?e.jsx("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:"Public"}):e.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-600/20",children:"Private"})})]})]}),u&&e.jsx(m,{to:`/teams/${a}/projects/new`,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"New Team Project"})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>x("overview"),className:`pb-4 px-1 ${l==="overview"?"border-b-2 border-indigo-500 text-indigo-600":"border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),e.jsxs("button",{onClick:()=>x("members"),className:`pb-4 px-1 ${l==="members"?"border-b-2 border-indigo-500 text-indigo-600":"border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Members (",t.members.length,")"]}),e.jsx("button",{onClick:()=>x("projects"),className:`pb-4 px-1 ${l==="projects"?"border-b-2 border-indigo-500 text-indigo-600":"border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Projects"}),o&&e.jsx("button",{onClick:()=>x("settings"),className:`pb-4 px-1 ${l==="settings"?"border-b-2 border-indigo-500 text-indigo-600":"border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Settings"})]})}),e.jsxs("div",{className:"mt-6",children:[l==="overview"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"About this team"}),e.jsx("p",{className:"text-gray-700 mb-6",children:t.description}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Team Details"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created: ",new Date(t.createdAt).toLocaleDateString()]}),t.updatedAt&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated: ",new Date(t.updatedAt).toLocaleDateString()]})]})]}),l==="members"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Team Members"}),o&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Invite New Members"}),e.jsxs("form",{onSubmit:E,className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"email",placeholder:"Email address",className:"flex-1 min-w-0 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:h,onChange:s=>y(s.target.value),required:!0}),e.jsx("button",{type:"submit",disabled:g,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${g?"opacity-70 cursor-not-allowed":""}`,children:g?"Sending...":"Send Invitation"})]}),w&&e.jsx("div",{className:"mt-2 text-sm text-red-600",children:w}),D&&e.jsx("div",{className:"mt-2 text-sm text-green-600",children:"Invitation sent successfully!"}),t.pendingInvitations&&t.pendingInvitations.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Pending Invitations"}),e.jsx("ul",{className:"border border-gray-200 rounded-md divide-y divide-gray-200",children:t.pendingInvitations.map((s,i)=>e.jsxs("li",{className:"px-4 py-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:s.email}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Invited ",new Date(s.invitedAt).toLocaleDateString()]})]},i))})]})]}),e.jsx("ul",{className:"divide-y divide-gray-200",children:t.members.map(s=>e.jsxs("li",{className:"py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:s.avatar,alt:s.name,className:"w-10 h-10 rounded-full mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.role==="admin"?e.jsx("span",{className:"text-pink-600 font-medium",children:"Admin"}):e.jsx("span",{children:"Member"})})]})]}),o&&r.id!==s.userId&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{className:"mt-1 block pl-3 pr-10 py-2 text-sm border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md",value:s.role,onChange:i=>R(s.userId,i.target.value),children:[e.jsx("option",{value:"editor",children:"Editor"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx("button",{onClick:()=>I(s.userId),className:"inline-flex items-center p-1 border border-transparent rounded-full text-red-600 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),r.id===s.userId&&!o&&e.jsx("button",{onClick:()=>I(s.userId),className:"text-sm text-red-600 hover:text-red-900",children:"Leave Team"})]},s.userId))})]}),l==="projects"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Team Projects"}),u&&e.jsx(m,{to:`/teams/${a}/projects/new`,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"New Project"})]}),e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No projects yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new team project."}),u&&e.jsx("div",{className:"mt-6",children:e.jsx(m,{to:`/teams/${a}/projects/new`,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"New Project"})})]})]}),l==="settings"&&o&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Team Settings"}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-6",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Team Information"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Update your team details."})]}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Team Name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",name:"name",id:"name",value:t.name,onChange:s=>d({...t,name:s.target.value}),className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("div",{className:"mt-1",children:e.jsx("textarea",{id:"description",name:"description",rows:4,value:t.description,onChange:s=>d({...t,description:s.target.value}),className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Team Visibility"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"visibility-private",name:"visibility",type:"radio",value:"private",checked:t.visibility==="private",onChange:()=>d({...t,visibility:"private"}),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"}),e.jsx("label",{htmlFor:"visibility-private",className:"ml-3 block text-sm font-medium text-gray-700",children:"Private - Only visible to team members"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"visibility-public",name:"visibility",type:"radio",value:"public",checked:t.visibility==="public",onChange:()=>d({...t,visibility:"public"}),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300"}),e.jsx("label",{htmlFor:"visibility-public",className:"ml-3 block text-sm font-medium text-gray-700",children:"Public - Anyone can view team projects"})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:()=>{C(a,{name:t.name,description:t.description,visibility:t.visibility})},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save Changes"})})]})})]}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Danger Zone"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Destructive actions for your team."})]}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:e.jsx("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:()=>{window.confirm("Are you sure you want to delete this team? This action cannot be undone.")&&v("/teams")},children:"Delete Team"})})]})]})]})]}):e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M8.485 3.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 3.495zM10 6a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 6zm0 9a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"This team is private. You need to be a member to view its details."})})]})}),e.jsx(m,{to:"/teams",className:"text-indigo-600 hover:text-indigo-900",children:"← Back to Teams"})]})}export{H as default};
